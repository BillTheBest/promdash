angular.module("Prometheus.directives").directive('widgetTimeOptions', function() {
  return {
    restrict: "E",
    scope: {
      endTime: "=",
      range: "=",
      closeTab: "&",
    },
    link: function(scope, element, attrs) {
      element.addClass("graph_control_tabpane");
      scope.closeTab = scope.closeTab();

      scope.increaseRange = function() {
        scope.range = Prometheus.Graph.nextLongerRange(scope.range);
      };

      scope.decreaseRange = function() {
        scope.range = Prometheus.Graph.nextShorterRange(scope.range);
      };

      scope.increaseEndTime = function() {
        scope.endTime = Prometheus.Graph.laterEndTime(scope.endTime, scope.range);
      };

      scope.decreaseEndTime = function() {
        scope.endTime = Prometheus.Graph.earlierEndTime(scope.endTime, scope.range);
      };

      scope.clearEndTime = function() {
        scope.endTime = null;
      };
    },
    templateUrl: "<%= asset_path('widget_time_options_template.html') %>"
  };
});
